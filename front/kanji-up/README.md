<p align="center">
  <a href="https://kanjiup.alexandre-em.fr" target="blank">
    <img src="./assets/adaptive-icon.png" width="200" alt="KanjiUp Logo" />
  </a>
</p>
<h1 align="center">KanjiUp</h1>

[![Netlify Status](https://api.netlify.com/api/v1/badges/7546e544-6733-4666-b116-97fd9a197f33/deploy-status?branch=main)](https://app.netlify.com/sites/luxury-taffy-de0aa3/deploys)

# Description
KanjiUp is an application that will help the user to learn and memorize Japanese kanji with Flashcard and drawing recognition (~2600 kanji can be recognized).
The application is can be runned on a web browser, on android and ios devices.
There are more than 5000 kanjis on the database with their readings (onyomi and kunyomi), meanings and other information like their stroke count, some usage examples, etc.
All informations are extracted from KanjiDict and putted on a the database.

> If there are incorrect information or misses, the user can report with the details, so we can update the database.

This application has been developped with React Native (Typescript) with Redux for the application state management and is using TensorflowJs to use the kanji recognition model on the device.
So the user can use the application offline, if he is connected at least 3 days before (access token expiration time) and if he already selected the kanji and saved it locally on the device.

# Installation
```sh
  $ yarn # Download and install all dependencies
  $ yarn start # to run the app locally without building the application
```

# Local build
## Local build on web
To build the web application, after installing the project, you have to run
```sh
  $ yarn build:web
```
it will then generate a `web-build` folder that you can deploy on Netlify, Firebase, or other

## Local build on ios

```sh
  # Pass the application from Managed workflow to a bare workflow
  $ yarn eject
```

On the package.json add this script
```json
  {
    "scripts": {
      "build:ios": "react-native bundle --entry-file='index.js' --bundle-output='./ios/main.jsbundle' --dev=false --assets-dest='ios' --platform='ios'",
    } 
  }
```
It will generate a xcode project, that you have to open to build the application on your phone. Once Xcode openned, click on:

`xcode > Preferences > Accounts > +`

Add an apple ID and generate a certificate.

Then close the Preferences windows and click on the application project to update your application information on the `general` tab.
You'll have then to select your certificate you previously generated by clicking on the `Signing & Capacibilities` tab and on the `Signing` section. You will have an error saying that you can't create an application with this certificate, so to be able to create one, you will have to remove the `Push Notifications` section by clicking on the bin icon.

You'll have to add some file to the build including the assets you are using on this project (images, etc.). By clicking on the `Build phases` tab and on the `Copy bundle Resources` section add the assets and the file named `main.jsbundle`.

You can now build the application and it will show an `Permission error`, from your phone `settings > general > VPN...` you will have to allow your development certificate to be able to access to your application on your phone.

## Android .apk generation
You must be login to expo with
```sh
  $ expo login
```
and then execute the command
```sh
  $ yarn build:android
```
Expo will then manage all the build process and return the build archive link

# Implementation
see [Implementation.md](./doc/Implementation.md)
